âœ¨ Storage Service - åˆ©ç”¨æ™‚ã®æ³¨æ„
===================================

ğŸ¯ é‡è¦ãªãŠçŸ¥ã‚‰ã›
-----------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯çµ±ä¸€ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ï¼

**è‡ªåˆ†ã§ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã›ãšã€å¿…ãšã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚**

ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ (30ç§’)
-------------------

```typescript
import { getStorageService } from "@/lib/storage-service";

const storage = getStorageService();

// ä¿å­˜
await storage.saveSession({
  appState: { lastOpenedMdiPath: "/path/to/file.mdi" },
  recentFiles: [],
  editorBuffer: { content: "...", timestamp: Date.now() }
});

// èª­ã¿è¾¼ã¿
const session = await storage.loadSession();
```

ã¨ã¦ã‚‚ç°¡å˜ï¼Electron ã¨ Web ã§è‡ªå‹•çš„ã«å‹•ä½œã—ã¾ã™ã€‚

ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å ´æ‰€
-----------

ã‚¯ã‚¤ãƒƒã‚¯ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³:  STORAGE_INDEX.md
çµ±åˆã‚¬ã‚¤ãƒ‰:          ELECTRON_INTEGRATION_CHECKLIST.md
API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹:    STORAGE_QUICK_REFERENCE.md
ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°:  STORAGE_ARCHITECTURE.md
ã‚³ãƒ¼ãƒ‰ä¾‹:            lib/storage-service-examples.ts

ğŸ“ ã‚³ã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€
-----------

å®Ÿè£…:  lib/storage-*.ts
è¦å‰‡:  .cursor/rules/storage-service.md

ğŸ“ 12å€‹ã®ã‚³ã‚¢ãƒ¡ã‚½ãƒƒãƒ‰
-----------------

ã‚»ãƒƒã‚·ãƒ§ãƒ³:  saveSession(), loadSession()
çŠ¶æ…‹:        saveAppState(), loadAppState()
ãƒ•ã‚¡ã‚¤ãƒ«:    addToRecent(), getRecentFiles(), removeFromRecent(), clearRecent()
ç·¨é›†ãƒãƒƒãƒ•ã‚¡:      saveEditorBuffer(), loadEditorBuffer(), clearEditorBuffer()
ã‚¯ãƒªã‚¢:      clearAll()

âœ… ä½¿ç”¨ã™ã¹ãå ´åˆ
-----------

âœ“ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®ä¿å­˜
âœ“ å‰å›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®èª­ã¿è¾¼ã¿
âœ“ æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†
âœ“ ç·¨é›†ãƒãƒƒãƒ•ã‚¡ã®è‡ªå‹•ä¿å­˜
âœ“ ã‚¯ãƒ©ãƒƒã‚·ãƒ¥å›å¾©
âœ“ æ°¸ç¶šåŒ–ãŒå¿…è¦ãªã‚ã‚‰ã‚†ã‚‹ãƒ‡ãƒ¼ã‚¿

âŒ ä½¿ç”¨ã™ã¹ãã§ãªã„å ´åˆ
-----------

âœ— ç‹¬è‡ªã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ãªã„
âœ— localStorage ã‚’ç›´æ¥ä½¿ç”¨ã—ãªã„
âœ— IndexedDB ã‚’æ‰‹å‹•ã§æ“ä½œã—ãªã„
âœ— SQLite ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„

ğŸ”‘ ä¸»ãªæ©Ÿèƒ½
-----------

âœ¨ çµ±ä¸€ã•ã‚ŒãŸAPI   - åŒã˜ã‚³ãƒ¼ãƒ‰ã§ Electron ã¨ Web ã‚’ã‚µãƒãƒ¼ãƒˆ
âœ¨ è‡ªå‹•æ¤œå‡º         - ç’°å¢ƒã®æ‰‹å‹•è¨­å®šã¯ä¸è¦
âœ¨ é«˜æ€§èƒ½           - Electron ã¯åŒæœŸã€Web ã¯éåŒæœŸ
âœ¨ å‹å®‰å…¨           - å®Œå…¨ãª TypeScript ã‚µãƒãƒ¼ãƒˆ
âœ¨ ä½¿ã„ã‚„ã™ã•       - ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãª API

âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãƒ’ãƒ³ãƒˆ
-----------

â€¢ æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«10ä»¶ã«åˆ¶é™ã•ã‚Œã¾ã™
â€¢ ã‚¨ãƒ‡ã‚£ã‚¿ãƒãƒƒãƒ•ã‚¡ã¯30ç§’ã”ã¨ã«ä¿å­˜ã•ã‚Œã¾ã™
â€¢ è¤‡æ•°ã®æ“ä½œã«ã¯ saveSession() ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
â€¢ Electron: ç´„2-5msã€Web: ç´„10-20ms

ğŸ“ ã‚¯ã‚¤ãƒƒã‚¯ãƒ˜ãƒ«ãƒ—
-----------

è‡ªå‹•ä¿å­˜ã®è¨­å®š:
  setInterval(() => storage.saveEditorBuffer(...), 30000)

ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã®å¾©å…ƒ:
  const session = await storage.loadSession()

ä¿å­˜æ™‚ã®æ›´æ–°:
  await storage.addToRecent({...})
  await storage.saveAppState({...})
  await storage.clearEditorBuffer()

ãƒ†ã‚¹ãƒˆ:
  import { StorageServiceTestSuite } from "@/lib/storage-service-tests"
  await new StorageServiceTestSuite().runAll()

â“ ã‚ˆãã‚ã‚‹è³ªå•
-----------

Q: æ‰‹å‹•ã§ initialize() ã‚’å‘¼ã¶å¿…è¦ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ
A: ã„ã„ãˆã€è‡ªå‹•çš„ã«å‘¼ã°ã‚Œã¾ã™ã€‚

Q: Web ã§è¨­å®šãŒå¿…è¦ã§ã™ã‹ï¼Ÿ
A: ã„ã„ãˆã€ç›´æ¥ä½¿ç”¨ã§ãã¾ã™ã€‚

Q: Electron ã§å¿…è¦ãªã‚‚ã®ã¯ï¼Ÿ
A: main.ts ã¨ preload.ts ã« IPC ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®è¿½åŠ ãŒå¿…è¦ã§ã™
   å‚ç…§: ELECTRON_INTEGRATION_CHECKLIST.md

Q: ãƒ‡ãƒ¼ã‚¿ã¯ã©ã“ã«ä¿å­˜ã•ã‚Œã¾ã™ã‹ï¼Ÿ
A: Electron: ~/Library/Application Support/Illusions/illusions-storage.db
   Web: ãƒ–ãƒ©ã‚¦ã‚¶ã® IndexedDB

Q: æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®æ•°ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã‹ï¼Ÿ
A: ã¯ã„ã€å®Ÿè£…å†…ã®å®šæ•°ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0.0 | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æœ¬ç•ªç’°å¢ƒå¯¾å¿œ
æ›´æ–°æ—¥: 2026-01-28

ğŸ‘‰ ä»Šã™ãå§‹ã‚ã‚‹: STORAGE_INDEX.md ã‚’èª­ã‚€
