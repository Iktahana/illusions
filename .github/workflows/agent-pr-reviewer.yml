name: Copilot PR Reviewer

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  pull-requests: write
  contents: read

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Notify Review Available
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          # GitHub CLI does not currently support --agent-file option
          # Notify developers to use @reviewer agent in GitHub Copilot Chat

          gh pr comment ${{ github.event.pull_request.number }} --body \
            "ğŸ‘‹ **Copilot Review Ready**

            ã“ã®PRã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã«ã¯ã€GitHub Copilot Chat ã§ä»¥ä¸‹ã®ã‚ˆã†ã« \`@reviewer\` ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¦ãã ã•ã„ï¼š

            **VS Code / GitHub.com ã§ï¼š**
            \`\`\`
            @reviewer ã“ã® PR (#${{ github.event.pull_request.number }}) ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„
            \`\`\`

            **ã¾ãŸã¯ GitHub CLI ã§ï¼š**
            \`\`\`bash
            gh copilot suggest \"Review PR #${{ github.event.pull_request.number }}\"
            \`\`\`

            ---

            **è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã¤ã„ã¦ï¼š**
            ç¾åœ¨ã€GitHub CLI ã¯ custom agents ã®è‡ªå‹•å®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
            ä¸Šè¨˜ã®æ–¹æ³•ã§ \`@reviewer\` ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ‰‹å‹•ã§å‘¼ã³å‡ºã—ã¦ãã ã•ã„ã€‚

            **ãƒ¬ãƒ“ãƒ¥ãƒ¼åŸºæº–ï¼š**
            - âœ… ãƒ‡ãƒ¼ã‚¿ç ´æã€ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œ
            - âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è»½å¾®ãªæ”¹å–„ææ¡ˆ
            - âŒ ã‚¹ã‚¿ã‚¤ãƒ«ã®å¥½ã¿ã€äº›ç´°ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆæŒ‡æ‘˜ã—ã¾ã›ã‚“ï¼‰"
