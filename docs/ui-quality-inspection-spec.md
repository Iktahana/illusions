# GitHub 集成 - UI 質量検査仕様書

## 📋 検査概要

**対象機能**: GitHub 統合機能（認証、プロジェクト管理、バージョン履歴）  
**実装バージョン**: v1.0.0  
**検査日**: 2026-02-06  
**対象ファイル数**: 18 ファイル  
**検査範囲**: 全 4 フェーズ（認証、Git コア、プロジェクト管理、バージョン履歴）

---

## 🎯 検査目的

1. **機能性**: すべての UI コンポーネントが仕様通りに動作すること
2. **視覚的品質**: デザインが統一され、美しく表示されること
3. **UX**: ユーザー体験が直感的でスムーズであること
4. **アクセシビリティ**: キーボード操作、スクリーンリーダー対応
5. **レスポンシブ**: さまざまな画面サイズで適切に表示されること
6. **言語品質**: 日本語表記が自然で適切であること
7. **エラーハンドリング**: エラー時に適切なフィードバックがあること

---

## 🔍 検査項目

### Phase 1: GitHub 認証 UI

#### 1.1 GitHubAuthPanel (`components/github/GitHubAuthPanel.tsx`)

**場所**: Explorer サイドバー → GitHub タブ

##### ✅ 表示状態の検証

**未認証状態**:
- [ ] 「GitHub にログイン」ボタンが中央に表示される
- [ ] GitHub アイコンとボタンテキストが表示される
- [ ] 機能説明リストが表示される:
  - 複数デバイス間での同期
  - バージョン履歴の閲覧・復元
  - ブランチによる実験的な編集
  - クラウドバックアップ
- [ ] ホバー時にボタンの背景色が変化する

**認証中状態（デバイスコード表示）**:
- [ ] デバイスコード（例: `ABCD-1234`）が大きく表示される
- [ ] フォントが等幅フォント（mono）である
- [ ] コピーボタンが表示される
- [ ] コピーボタンクリック時に「✓ コピー済み」と表示される
- [ ] 2秒後に元の状態に戻る
- [ ] 認証 URL リンクが表示される
- [ ] リンククリックで新しいタブで GitHub が開く
- [ ] 「認証を待っています...」ローディング表示がある
- [ ] 注意書きが表示される

**認証済み状態**:
- [ ] ユーザーのアバター画像が表示される（丸型、サイズ適切）
- [ ] ユーザー名（name）が表示される
- [ ] GitHub ユーザー名（@login）が表示される
- [ ] メールアドレス（存在する場合）が表示される
- [ ] ログアウトボタンが表示される
- [ ] ログアウトボタンクリックで認証が解除される

##### ✅ インタラクションの検証

- [ ] ログインボタンクリック後、デバイスコードが即座に表示される
- [ ] コピーボタンが正常に動作する（クリップボードにコピー）
- [ ] ブラウザで認証完了後、自動的に認証済み状態になる
- [ ] ローディング中はボタンが無効化される
- [ ] エラー発生時にエラーメッセージが表示される

##### ✅ スタイリングの検証

- [ ] 色使いが統一されている（accent, foreground, background）
- [ ] 余白（padding, margin）が適切
- [ ] フォントサイズが読みやすい
- [ ] ダークモードでも見やすい
- [ ] アニメーションがスムーズ（ローディング、トランジション）

---

### Phase 3: プロジェクト管理 UI

#### 3.1 ProjectsPanel (`components/github/ProjectsPanel.tsx`)

**場所**: ActivityBar → プロジェクトアイコン（最上部）

##### ✅ ヘッダー部分

- [ ] 「新規プロジェクト」ボタンが表示される
- [ ] ボタンが accent カラーで目立つ
- [ ] GitHub ログイン済みの場合、「GitHub から読み込む」ボタンが表示される
- [ ] 未ログインの場合、インポートボタンが非表示

##### ✅ プロジェクト一覧

**プロジェクトが 0 件の場合**:
- [ ] 中央に「プロジェクトがありません」メッセージ
- [ ] FilePlus アイコンが表示される
- [ ] 「新規プロジェクトをクリックして始めましょう」ガイドが表示される

**プロジェクトが存在する場合**:
- [ ] 各プロジェクトカードが縦に並ぶ
- [ ] ローカルプロジェクトは HardDrive アイコン
- [ ] GitHub プロジェクトは Github アイコン
- [ ] プロジェクト名が表示される
- [ ] 文字数が表示される（カンマ区切り）
- [ ] 相対時間が表示される（例: 「2分前」「1時間前」「3日前」）
- [ ] GitHub プロジェクトの場合、リポジトリ名（owner/repo）がリンクとして表示される
- [ ] リンククリックで新しいタブで GitHub が開く
- [ ] ホバー時に背景色が変化する

##### ✅ プロジェクトカードのアクション

**ローカルプロジェクト**:
- [ ] 「GitHub へ」ボタンが表示される（GitHub ログイン時のみ）
- [ ] 「削除」ボタンが表示される
- [ ] ボタンクリック時にアップロードダイアログが開く

**GitHub プロジェクト**:
- [ ] 「削除」ボタンのみ表示される
- [ ] 削除ボタンは赤色で表示される

##### ✅ 新規プロジェクト作成ダイアログ

**表示**:
- [ ] モーダルオーバーレイが表示される（背景が暗くなる）
- [ ] ダイアログが中央に表示される
- [ ] 「新規プロジェクト」タイトルが表示される
- [ ] プロジェクト名入力欄が表示される
- [ ] プレースホルダー「例: 春の雪」が表示される
- [ ] キャンセルボタンと作成ボタンが表示される

**インタラクション**:
- [ ] 入力欄にフォーカスが当たる
- [ ] Enter キーで作成できる
- [ ] プロジェクト名が空の場合、作成ボタンが無効化される
- [ ] 作成中は「作成中...」と表示される
- [ ] 作成中はボタンが無効化される
- [ ] 作成完了後、ダイアログが閉じる
- [ ] 新しいプロジェクトがリストの最上部に追加される
- [ ] オーバーレイクリックでキャンセルできる
- [ ] Esc キーでキャンセルできる

##### ✅ GitHub インポートダイアログ

**表示**:
- [ ] 「GitHub から読み込む」タイトル
- [ ] リポジトリ入力欄（プレースホルダー: username/novel-project）
- [ ] 形式説明「形式: owner/repository」が表示される
- [ ] キャンセルと読み込むボタン

**インタラクション**:
- [ ] 入力欄が空の場合、読み込むボタンが無効化される
- [ ] 読み込み中は「読み込み中...」と表示される
- [ ] Enter キーで実行できる
- [ ] 無効なリポジトリ名の場合、エラーメッセージが表示される
- [ ] 存在しないリポジトリの場合、エラーメッセージが表示される
- [ ] 成功時、プロジェクトがリストに追加される

##### ✅ GitHub アップロードダイアログ

**表示**:
- [ ] 「GitHub へアップロード」タイトル
- [ ] リポジトリ名入力欄
- [ ] デフォルト値がプロジェクト名から生成される（スペース→ハイフン、小文字化）
- [ ] 制約説明「英数字、ハイフン、アンダースコアのみ」
- [ ] キャンセルとアップロードボタン

**インタラクション**:
- [ ] Enter キーで実行できる
- [ ] アップロード中は「アップロード中...」と表示される
- [ ] 成功時、プロジェクトタイプが GitHub に変更される
- [ ] リポジトリ名が既に存在する場合、エラーメッセージが表示される

##### ✅ エラー表示

- [ ] エラーメッセージが赤色の枠で表示される
- [ ] エラーアイコンが表示される
- [ ] エラーテキストが読みやすい
- [ ] ダークモードでも見やすい

---

#### 3.2 ActivityBar 統合

**場所**: 左端の縦型バー

##### ✅ プロジェクトアイコン

- [ ] FolderGit2 アイコンが最上部に表示される
- [ ] ツールチップ「プロジェクト (Ctrl+Shift+P)」が表示される
- [ ] クリックで ProjectsPanel が開く
- [ ] アクティブ時に背景色が変化する
- [ ] 非アクティブ時はグレー表示
- [ ] ホバー時に色が変化する

---

### Phase 4: バージョン履歴 UI

#### 4.1 VersionHistoryPanel (`components/github/VersionHistoryPanel.tsx`)

**場所**: Inspector → 履歴タブ

##### ✅ ヘッダー部分

- [ ] History アイコンと「バージョン履歴」タイトルが表示される
- [ ] 「タグを作成」ボタンが表示される
- [ ] ボタンクリック時にタグ作成ダイアログが開く

##### ✅ コミット一覧

**コミットが存在しない場合**:
- [ ] 中央に「バージョン履歴がありません」メッセージ
- [ ] History アイコンが表示される

**コミットが存在する場合**:
- [ ] コミットが時系列順（新→古）に表示される
- [ ] 各コミットに丸いインジケーター（●）が表示される
- [ ] 最新コミットに「HEAD」バッジが表示される
- [ ] コミットメッセージが表示される
- [ ] 作成者名が表示される
- [ ] 相対時間が表示される（例: 「2分前」）
- [ ] タグが存在する場合、タグバッジが表示される
- [ ] 「差分を表示」ボタンが表示される
- [ ] ホバー時に背景色が変化する

##### ✅ 差分表示モーダル

**表示**:
- [ ] 全画面に近い大きなモーダル（80vh）
- [ ] 「差分表示」タイトル
- [ ] 「このバージョンに戻す」ボタン（存在する場合）
- [ ] 閉じるボタン（X）
- [ ] DiffViewer が表示される

**インタラクション**:
- [ ] オーバーレイクリックで閉じる
- [ ] X ボタンクリックで閉じる
- [ ] Esc キーで閉じる
- [ ] 「このバージョンに戻す」クリックで確認ダイアログが表示される
- [ ] 確認後、エディタの内容が復元される
- [ ] モーダルが閉じる

##### ✅ タグ作成ダイアログ

**表示**:
- [ ] 「タグを作成」タイトル
- [ ] タグ名入力欄（プレースホルダー: v1.0, 初稿完成）
- [ ] メッセージ入力欄（任意、複数行）
- [ ] キャンセルと作成ボタン

**インタラクション**:
- [ ] タグ名が空の場合、作成ボタンが無効化される
- [ ] 作成中は「作成中...」と表示される
- [ ] 作成完了後、タグがコミットに表示される
- [ ] 履歴が再読み込みされる

##### ✅ DiffViewer コンポーネント

**ヘッダー**:
- [ ] 「変更前 → 変更後」ラベルが表示される
- [ ] 統計情報が表示される:
  - 緑色: +X 文字
  - 赤色: -X 文字

**コンテンツ**:
- [ ] 等幅フォント（mono）で表示される
- [ ] 追加された文字が緑色の背景
- [ ] 削除された文字が赤色の背景 + 打ち消し線
- [ ] 変更なしの文字は通常表示
- [ ] 長い文章でもスクロール可能
- [ ] ダークモードでも見やすい色

---

#### 4.2 Inspector 統合

**場所**: 右サイドバー

##### ✅ 履歴タブ

- [ ] タブバーに「履歴」タブが表示される
- [ ] History アイコンが表示される
- [ ] クリックで履歴パネルが開く
- [ ] アクティブ時に下線が表示される
- [ ] 非アクティブ時はグレー表示

##### ✅ GitHub プロジェクト未選択時

- [ ] 「プロジェクトが選択されていません」メッセージ
- [ ] History アイコンが表示される

##### ✅ ローカルプロジェクト選択時

- [ ] 「バージョン履歴は GitHub プロジェクトでのみ利用可能です」メッセージ
- [ ] GitHub へのアップロードを促すメッセージ
- [ ] History アイコンが表示される

---

## 🎨 視覚的品質チェック

### デザインシステムの一貫性

#### カラーパレット
- [ ] **accent**: アクセントカラー（ボタン、選択状態）
- [ ] **foreground**: テキストカラー（primary, secondary, tertiary）
- [ ] **background**: 背景カラー（primary, secondary, tertiary）
- [ ] **border**: ボーダーカラー
- [ ] **hover**: ホバー状態の背景色
- [ ] すべてのコンポーネントで統一されている

#### タイポグラフィ
- [ ] 見出し: `text-lg font-semibold`
- [ ] 本文: `text-sm`
- [ ] 補足: `text-xs`
- [ ] コード: `font-mono`
- [ ] 行間が適切（`leading-relaxed`）

#### スペーシング
- [ ] パディング: `p-3`, `p-4`
- [ ] マージン: `mb-2`, `mb-3`, `mb-4`
- [ ] ギャップ: `gap-2`, `gap-3`, `gap-4`
- [ ] 一貫性がある

#### アイコン
- [ ] サイズが統一されている（12px, 14px, 16px, 18px）
- [ ] 色が適切
- [ ] 配置が適切（左/右揃え）

#### ボーダー
- [ ] `border-border` カラーが統一
- [ ] `rounded-md`, `rounded-lg` が適切に使用
- [ ] 太さが統一（1px）

#### シャドウ
- [ ] 必要な場所にのみ使用
- [ ] 深さが適切

---

## 📱 レスポンシブデザイン

### 画面サイズ別チェック

#### 大画面（1920px 以上）
- [ ] すべてのパネルが適切に表示される
- [ ] 横幅が広すぎて読みにくくない
- [ ] リサイズ可能なパネルが機能する

#### 標準画面（1280px - 1920px）
- [ ] デフォルトレイアウトが適切
- [ ] すべての要素が見える
- [ ] テキストが読みやすい

#### 小画面（1024px - 1280px）
- [ ] サイドパネルの最小幅が保たれる
- [ ] テキストが折り返される
- [ ] スクロールバーが表示される

#### タブレット（768px - 1024px）
- [ ] モバイルレイアウトに切り替わる（存在する場合）
- [ ] タッチ操作が可能

---

## ⌨️ キーボード操作

### ショートカットキー
- [ ] `Ctrl+Shift+P`: プロジェクトパネルを開く
- [ ] `Esc`: モーダルを閉じる
- [ ] `Enter`: ダイアログで実行
- [ ] `Tab`: フォーカス移動

### フォーカス管理
- [ ] タブキーでフォーカス移動が可能
- [ ] フォーカス時にアウトラインが表示される（`focus:ring-2`）
- [ ] フォーカス順序が論理的
- [ ] モーダル内でフォーカスがトラップされる

---

## 🌐 日本語品質チェック

### 文法・表記
- [ ] 送り仮名が正しい
- [ ] 敬体（です・ます調）で統一されている
- [ ] 専門用語が適切（「リポジトリ」「コミット」など）
- [ ] 句読点が適切

### 自然さ
- [ ] ネイティブスピーカーが違和感を感じない
- [ ] 機械翻訳的な表現がない
- [ ] カタカナ語が適切に使用されている

### 用語の一貫性
| 英語 | 日本語 | 確認 |
|------|--------|------|
| Repository | リポジトリ | [ ] |
| Commit | コミット | [ ] |
| Branch | ブランチ | [ ] |
| Tag | タグ | [ ] |
| Project | プロジェクト | [ ] |
| Version | バージョン | [ ] |
| History | 履歴 | [ ] |
| Diff | 差分 | [ ] |

---

## 🐛 エラーハンドリング

### エラーメッセージ
- [ ] エラーが発生した場合、明確なメッセージが表示される
- [ ] エラーメッセージが日本語である
- [ ] エラーメッセージが赤色で表示される
- [ ] エラーの原因が分かりやすい
- [ ] 解決方法が示されている（可能な場合）

### エラーシナリオ

#### 認証エラー
- [ ] 認証失敗時: 「認証に失敗しました」
- [ ] トークン期限切れ: 適切に再ログインを促す
- [ ] ネットワークエラー: 「ネットワークに接続できません」

#### プロジェクト作成エラー
- [ ] 名前の重複: 適切なメッセージ
- [ ] GitHub エラー: GitHub のエラーメッセージを日本語化

#### バージョン履歴エラー
- [ ] コミットが見つからない: 適切なメッセージ
- [ ] 読み込み失敗: 再試行の案内

---

## ⚡ パフォーマンス

### ローディング状態
- [ ] データ読み込み中にローディング表示がある
- [ ] ローディングアニメーションがスムーズ
- [ ] ローディング中は操作が無効化される
- [ ] 長時間のローディングでタイムアウトする

### アニメーション
- [ ] トランジションが滑らか（`transition-colors`, `transition-all`）
- [ ] アニメーション時間が適切（150ms - 300ms）
- [ ] 過度なアニメーションがない

---

## ♿ アクセシビリティ

### ARIA 属性
- [ ] ボタンに `aria-label` がある（アイコンのみの場合）
- [ ] モーダルに `role="dialog"` がある
- [ ] 警告に `role="alert"` がある

### コントラスト
- [ ] テキストと背景のコントラスト比が 4.5:1 以上
- [ ] ダークモードでも同様

### スクリーンリーダー
- [ ] 画像に `alt` 属性がある
- [ ] リンクに説明的なテキストがある
- [ ] フォームに `label` がある

---

## 🧪 テストシナリオ

### シナリオ 1: 初回ユーザー（GitHub 未ログイン）

1. [ ] アプリを起動
2. [ ] 左サイドバーの「GitHub」タブをクリック
3. [ ] 未認証状態が表示される
4. [ ] 「GitHub にログイン」ボタンをクリック
5. [ ] デバイスコードが表示される
6. [ ] コードをコピー
7. [ ] 認証 URL をクリックして GitHub で承認
8. [ ] アプリに戻ると認証済み状態が表示される
9. [ ] ユーザー情報が正しく表示される

### シナリオ 2: プロジェクト作成とアップロード

1. [ ] 左サイドバーの「プロジェクト」をクリック
2. [ ] 「新規プロジェクト」をクリック
3. [ ] プロジェクト名「テスト小説」を入力
4. [ ] 「作成」をクリック
5. [ ] プロジェクトがリストに表示される
6. [ ] プロジェクトカードの「GitHub へ」をクリック
7. [ ] リポジトリ名「test-novel」を入力
8. [ ] 「アップロード」をクリック
9. [ ] アップロード完了後、GitHub アイコンに変わる
10. [ ] リポジトリリンクが表示される

### シナリオ 3: バージョン履歴の確認

1. [ ] GitHub プロジェクトを選択
2. [ ] 右サイドバーの「履歴」タブをクリック
3. [ ] コミット履歴が表示される
4. [ ] コミットを選択して「差分を表示」をクリック
5. [ ] 差分が正しく表示される
6. [ ] 「このバージョンに戻す」をクリック
7. [ ] 確認ダイアログが表示される
8. [ ] 確認後、内容が復元される

### シナリオ 4: タグの作成

1. [ ] 履歴タブで「タグを作成」をクリック
2. [ ] タグ名「v1.0」を入力
3. [ ] メッセージ「初稿完成」を入力
4. [ ] 「作成」をクリック
5. [ ] タグが最新コミットに表示される

### シナリオ 5: エラーハンドリング

1. [ ] ネットワークを切断
2. [ ] GitHub へのアップロードを試みる
3. [ ] 適切なエラーメッセージが表示される
4. [ ] ネットワークを再接続
5. [ ] 再試行が可能

---

## 📊 検査結果レポート

### 検査日時
- **開始**: ____年____月____日 ____時____分
- **終了**: ____年____月____日 ____時____分
- **検査者**: ___________________

### 検査環境
- **OS**: ________________
- **ブラウザ**: ________________
- **画面解像度**: ________________
- **言語設定**: ________________

### 検査結果サマリー

| カテゴリ | 合格 | 不合格 | 未検査 | 合格率 |
|---------|------|--------|--------|--------|
| Phase 1: 認証 UI | ___ / ___ | ___ | ___ | ___% |
| Phase 3: プロジェクト管理 | ___ / ___ | ___ | ___ | ___% |
| Phase 4: バージョン履歴 | ___ / ___ | ___ | ___ | ___% |
| 視覚的品質 | ___ / ___ | ___ | ___ | ___% |
| レスポンシブ | ___ / ___ | ___ | ___ | ___% |
| キーボード操作 | ___ / ___ | ___ | ___ | ___% |
| 日本語品質 | ___ / ___ | ___ | ___ | ___% |
| エラーハンドリング | ___ / ___ | ___ | ___ | ___% |
| パフォーマンス | ___ / ___ | ___ | ___ | ___% |
| アクセシビリティ | ___ / ___ | ___ | ___ | ___% |
| **合計** | **___ / ___** | **___** | **___** | **___%** |

### 重大な問題（Critical）

1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 高優先度の問題（High）

1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 中優先度の問題（Medium）

1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 低優先度の問題（Low）

1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 改善提案

1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 総合評価

- [ ] **合格**: すべての重大な問題が解決され、リリース可能
- [ ] **条件付き合格**: 軽微な問題のみ、リリース後に修正可能
- [ ] **不合格**: 重大な問題があり、修正が必要

### コメント

_________________________________________________________________
_________________________________________________________________
_________________________________________________________________
_________________________________________________________________

---

## 📎 付録

### スクリーンショット撮影ポイント

1. **認証フロー**: 未認証 → デバイスコード → 認証済み
2. **プロジェクト一覧**: 空 → ローカルプロジェクト → GitHub プロジェクト
3. **ダイアログ**: 作成、インポート、アップロード
4. **バージョン履歴**: 一覧 → 差分表示 → タグ作成
5. **エラー表示**: 各種エラーメッセージ

### ビデオ録画が推奨されるシナリオ

1. 認証フロー全体
2. プロジェクト作成からアップロードまで
3. バージョン復元の動作
4. アニメーションとトランジション

### チェックリスト使用方法

1. 各項目を順番に確認
2. 合格: ✅ チェック
3. 不合格: ❌ マーク + 詳細を問題リストに記載
4. 該当なし: N/A
5. すべての項目を確認後、サマリーを記入

---

**検査完了署名**

検査者: ___________________ 日付: ___________________

承認者: ___________________ 日付: ___________________

---

## 参考資料

- [GitHub Integration Complete Documentation](./github-integration-complete.md)
- [Phase 1 Summary](./github-integration-phase1-summary.md)
- [Code Review Standards](../CLAUDE.md)
